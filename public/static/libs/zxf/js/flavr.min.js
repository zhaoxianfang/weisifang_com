
var Flavr={obj:null,animates:["bounce","flash","pulse","rubberBand","shake","swing","tada","wobble","bounceIn","bounceInDown","bounceInLeft","bounceInRight","bounceInUp","bounceOut","bounceOutDown","bounceOutLeft","bounceOutRight","bounceOutUp","fadeIn","fadeInDown","fadeInDownBig","fadeInLeft","fadeInLeftBig","fadeInRight","fadeInRightBig","fadeInUp","fadeInUpBig","fadeOut","fadeOutDown","fadeOutDownBig","fadeOutLeft","fadeOutLeftBig","fadeOutRight","fadeOutRightBig","fadeOutUp","fadeOutUpBig","flip","flipInX","flipInY","flipOutX","flipOutY","lightSpeedIn","lightSpeedOut","rotateIn","rotateInDownLeft","rotateInDownRight","rotateInUpLeft","rotateInUpRight","rotateOut","rotateOutDownLeft","rotateOutDownRight","rotateOutUpLeft","rotateOutUpRight","slideInDown","slideInLeft","slideInRight","slideOutLeft","slideOutRight","slideOutUp","hinge","rollIn","rollOut"],getAnimate:function(){return this.animates[Math.floor(Math.random()*this.animates.length)];},closeAll:function(){this.obj.exit();},close:function(instance){instance?instance.close():this.obj.close();},msg:function(msg,timer=3){this.obj=new $.flavr({modal:false,position:'custom-center',autoclose:true,closeOverlay:true,closeEsc:true,timeout:timer*1000,buttons:{},content:msg,animateEntrance:Flavr.getAnimate(),animateClosing:Flavr.getAnimate(),});},confirm:function(msg,okBack,cancelBack){this.obj=new $.flavr({dialog:'confirm',animateEntrance:Flavr.getAnimate(),content:msg,onConfirm:function(){okBack&&okBack();},onCancel:function(){cancelBack&&cancelBack();}});},alert:function(msg){this.obj=new $.flavr({buttons:{OK:{text:'确认',style:'default',addClass:null,action:null}},animateEntrance:Flavr.getAnimate(),content:msg});},prompt:function(title,placeholder,okBack,cancelBack){this.obj=new $.flavr({content:title||'请在下方填写?',dialog:'prompt',prompt:{placeholder:placeholder||'Enter something'},onConfirm:function($container,$prompt){return okBack($prompt.val(),this)},onCancel:function(){cancelBack&&cancelBack(this)
            return true;},});},multipleBtn:function(title,btnList){this.obj=new $.flavr({content:title||'请选择',buttons:btnList});},stackedBtn:function(title,btnList){this.obj=new $.flavr({buttonDisplay:'stacked',content:title||'请选择',buttons:btnList});},html:function(title,html){this.obj=new $.flavr({title:title||'',content:html,closeOverlay:true,closeEsc:true,onShow:function(){this.fullscreen()},buttons:{close:{text:'关闭',}}});},iframe:function(url,width,height){this.obj=new $.flavr({title:false,closeOverlay:true,closeEsc:true,content:'<iframe width="100%" height="100%" src="'+url+'" frameborder="0" allowfullscreen style="height: calc( 100vh - 10px );"></iframe>',onShow:function(){if(width&&width){this.resize(width,width);}else{this.fullscreen();}},buttons:{close:{text:'关闭',}}});},form:function(title,options,onSubmitBack,method='post',tips=''){var html='';for(const item of options){switch(item.type){case'text':case'password':case'hidden':html+='<div class="form-row">'+'<input type="'+(item.type||'text')+'" name="'+item.name+'" placeholder="'+(item.placeholder||'')+'" value="'+(item.value||'')+'" required="'+(item.required||false)+'"/>'+' </div>';break;case'select':var optionEle='';for(const key in item.options){optionEle+='<option value="'+key+'"'+(((item.value||'')==key)?' selected ':'')+'>'+item.options[key]+'</option>';}
        html+='<div class="form-row">'+'<select class="flavr-select" name="'+item.name+'">'+
            optionEle+'</select>';break;case'checkbox':for(const key in item.list){html+='<div class="form-row">'+' <input type="checkbox" name="'+item.name+'" id="checkbox_'+item.name+key+'_check" value="'+key+'"'+(((item.value||'')==key)?' checked ':'')+' />'+' <label for="checkbox_'+item.name+key+'_check">'+item.list[key]+'</label>'+' </div>'+' </div>';}
        break;case'radio':for(const key in item.list){html+='<div class="form-row">'+' <input type="radio" name="'+item.name+'" id="radio_'+item.name+key+'_check" value="'+key+'"'+(((item.value||'')==key)?' checked ':'')+'/>'+' <label for="radio_'+item.name+key+'_check">'+item.list[key]+'</label>'+' </div>'+' </div>';}
        break;default:}}
        this.obj=new $.flavr({title:title||'表单提交',position:'',content:tips||'',dialog:'form',form:{content:html||'',method:method||'post'},onSubmit:function($container,$form){onSubmitBack&&onSubmitBack($form.serialize(),$form)
                return false;}});}};
