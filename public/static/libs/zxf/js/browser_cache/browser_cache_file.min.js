"use strict";var browserCacheFile={cache:{},loadScript:function(url,callback){var script=document.createElement("script");script.type="text/javascript";if(script.readyState){script.onreadystatechange=function(){if(script.readyState==="loaded"||script.readyState==="complete"){script.onreadystatechange=null;callback()}}}else{script.onload=function(){callback()}}
        script.src=url;document.body.appendChild(script)},loadStyle:function(url,callback){var link=document.createElement("link");link.rel="stylesheet";link.type="text/css";if(link.readyState){link.onreadystatechange=function(){if(link.readyState==="loaded"||link.readyState==="complete"){link.onreadystatechange=null;callback()}}}else{link.onload=function(){callback()}}
        link.href=url;document.head.appendChild(link)},loadImage:function(url,callback){var img=new Image();img.src=url;img.onload=callback},loadFont:function(url,fontFamily,callback){var style=document.createElement("style");style.type="text/css";style.textContent="@font-face { font-family: "+(fontFamily||"custom-family")+"; src: url("+url+"); }";style.onload=callback;document.head.appendChild(style)},loadAudio:function(url,callback){var audio=new Audio();audio.controls=!0;audio.src=url;audio.onload=callback},loadTxt:function(url,callback){var xhr=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");xhr.onreadystatechange=function(){if(xhr.readyState===4&&(xhr.status===200||xhr.status===0)){callback&&callback(xhr.responseText)}};xhr.open("GET",url,!0);xhr.send(null)},loadJson:function(url,callback){browserCacheFile.loadText(url,function(text){try{var json=JSON.parse(text);callback&&callback(json)}catch(e){throw new Error("Invalid JSON format: "+url)}})},loadResource:function(url,callback,sourceItme){if(browserCacheFile.cache[url]){callback()}else{var ext;if(url&&url.length>0){url=url.split("?")[0];ext=url.split(".").pop()}else{return!1}
        switch(ext){case "js":browserCacheFile.loadScript(url,function(){browserCacheFile.cache[url]=!0;callback()});break;case "css":browserCacheFile.loadStyle(url,function(){browserCacheFile.cache[url]=!0;callback()});break;case "ttf":browserCacheFile.loadFont(url,(sourceItme.fontFamily||""),function(){browserCacheFile.cache[url]=!0;callback()});break;case "txt":browserCacheFile.loadTxt(url,(sourceItme.fontFamily||""),function(){browserCacheFile.cache[url]=!0;callback()});break;case "json":browserCacheFile.loadJson(url,(sourceItme.fontFamily||""),function(){browserCacheFile.cache[url]=!0;callback()});break;case "mp3":browserCacheFile.loadAudio.loadStyle(url,function(){browserCacheFile.cache[url]=!0;callback()});break;case "png":case "jpg":case "jpeg":case "gif":browserCacheFile.loadImage(url,function(){browserCacheFile.cache[url]=!0;callback()});break;default:callback()}}},loadResources:function(resources,callback){var count=resources.length;function done(){count --;if(count===0){callback()}}
        for(var i=0;i<resources.length;i ++){var resource=resources[i];browserCacheFile.loadResource(resource.url,done,resource)}},loadModule:function(url,callback){},loadModules:function(modules,callback){var count=modules.length;function done(){count --;if(count===0){callback()}}
        for(var i=0;i<modules.length;i ++){var module=modules[i];browserCacheFile.loadResource(module.url,done,modules)}},getTtfFiles:function(){var fontFaceRules=[];var styleSheets=document.styleSheets;for(var i=0;i<styleSheets.length;i ++){try{var rules=styleSheets[i].cssRules||styleSheets[i].rules;for(var j=0;j<rules.length;j ++){if(rules[j].type===CSSRule.FONT_FACE_RULE){fontFaceRules.push(rules[j])}}}catch(err){}}
        var fontUrls=[];for(var k=0;k<fontFaceRules.length;k ++){var fontSrc=fontFaceRules[k].style.getPropertyValue("src");var fontUrl=fontSrc.match(/url\((.*?)\)/)[1];fontUrl=fontUrl.replace(/^['|"](.*)['|"]$/,"$1");fontUrls.push(fontUrl)}
        return fontUrls},getArgs:function(attr_name){var script=document.getElementsByTagName("script");var attr_val;for(var i=0;i<=script.length;i ++){try{attr_val=script[i].getAttribute(attr_name);if(attr_val){return attr_val}}catch(err){}}
        return attr_val},checkAutoCacheFile:function(){var auto_cache_file=browserCacheFile.getArgs("auto_cache_file");if(auto_cache_file&&auto_cache_file==="true"){var all_files=[];Array.from(window.performance.getEntriesByType("resource")).map(function(x){if(["script","img","link"].includes(x.initiatorType)){all_files.push(x.name)}});all_files=all_files.concat(browserCacheFile.getTtfFiles());browserCacheFile.load(all_files,[],function(){})}},load:function(resources,modules,callback){browserCacheFile.loadResources(resources,function(){browserCacheFile.loadModules(modules,callback)})}};function define(name,deps,impl){for(var i=0;i<deps.length;i ++){deps[i]=browserCacheFile.cache[deps[i]]}
    browserCacheFile.cache[name]=impl.apply(null,deps)}
function require(deps,callback){var args=[];for(var i=0;i<deps.length;i ++){args.push(browserCacheFile.cache[deps[i]])}
    callback.apply(null,args)}
browserCacheFile.checkAutoCacheFile()
